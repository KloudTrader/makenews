{
  "language": "javascript",
  "views": {
    "allCategories": {
      "map": "function(doc) { if(doc.docType === 'category') {emit(doc.docType, doc)} }"
    },
    "allCategoriesByName": {
      "map": "function(doc) { if(doc.docType === 'category') {emit(doc.name, doc)} }"
    },
    "sourceConfigurations": {
      "map": "function(doc) { if(doc.docType === 'source') {doc.categoryIds.forEach(function(id){emit(id, doc)})} }"
    },
    "allSourcesByUrl": {
      "map": "function(doc) { if(doc.docType === 'source') {emit(doc.url, doc)} }"
    },
    "allFeedsAndCategoriesWithSource": {
      "map": "function(doc) { if(doc.docType == 'source') { doc.categoryIds.forEach(function(id) {emit(doc._id, {_id:id});});} else if(doc.docType === 'feed' && (!doc.status || doc.status === 'surf')) { emit(doc.sourceId, null);}}"
    },
    "parkedFeeds": {
      "map": "function(doc) { if(doc.docType == 'source') { doc.categoryIds.forEach(function(id) {emit(doc._id, {_id:id});});} else if(doc.docType === 'feed' && doc.status === 'park') { emit(doc.sourceId, null);}}"
    }
  }
}